<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>12 Component Control</title> 
<meta http-equiv="Content-Type" content="text/html; charset="utf-8""> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- html,2,next,javascript,charset="utf-8" --> 
<meta name="src" content="main.tex"> 
<link rel="stylesheet" type="text/css" href="main.css"> 
<script type="text/javascript" src="scripts/shCore.js"></script> 
<script type="text/javascript" src="scripts/shBrushCpp.js"></script> 
<script type="text/javascript" src="scripts/shBrushJava.js"></script> 
<script type="text/javascript" src="scripts/shBrushPython.js"></script> 
<script type="text/javascript" src="scripts/shBrushBash.js"></script> 
<script type="text/javascript" src="scripts/shBrushXml.js"></script> 
<link href="styles/shCore.css" rel="stylesheet" type="text/css" /> 
<link href="styles/shThemeDefault.css" rel="stylesheet" type="text/css" /> 
<script type="text/javascript"> 
SyntaxHighlighter.all() 
</script> 
 </head><body 
>
<link rel="icon" type="image/png" href="images/RedHawk_Logo16x.gif"> 
<script> 
function f() {  
document.getElementById('main_content_wrap').focus(); 
} 
if (window.addEventListener) { 
window.addEventListener("load", f, false); 
} else if (window.attachEvent) { 
window.attachEvent("onload", f); 
} 
</script> 
<div class="header"> 
<ul class="navbar"> 
<li><a class="logo-small" href="index.html"><img src="images/RedHawk_Logo_ALT_B_121px.png"/></a></li> <li><a href="index.html">Home</a></li> 
<li><a href="gettingstarted/main.html">Getting Started</a></li> 
<li><a class="active" href="main.html">Documentation</a></li> 
<li><a href="download.html">Download</a></li> 
<li><a href="community.html">Community</a></li> 
</ul> 
<div class="pattern right"></div> 
<a id="forkme_banner" href="https://github.com/redhawksdr">View on GitHub</a> 
<noscript><div class ="NoScript">WARNING: JAVASCRIPT is not enabled. JAVASCRIPT is required for viewing code snippets.</div></noscript> 
</div> 
<!-- Custom MAIN CONTENT --> 
<div id="main_content_wrap" tabindex="0" class="outer"> 
<section id="main_content" class="inner"> 
<!--l. 1--><div class="crosslinks"><p class="noindent">[<a 
href="mainch13.html" >next</a>] [<a 
href="mainch11.html" >prev</a>] [<a 
href="mainch11.html#tailmainch11.html" >prev-tail</a>] [<a 
href="#tailmainch12.html">tail</a>] [<a 
href="main.html#mainch12.html" >up</a>] </p></div>
<h2 class="chapterHead"><span class="titlemark">Chapter&#x00A0;12</span><br /><a 
 id="x14-22900012"></a>Component Control</h2>
<h3 class="sectionHead"><span class="titlemark">12.1   </span> <a 
 id="x14-23000012.1"></a>Introduction</h3>
<!--l. 6--><p class="noindent" >In the execution of <a 
href="mainli2.html#glo:component">Components</a> it becomes critical to give the user custom access to certain
aspects of its control and configuration. This allows for the ability to make runtime changes on
pieces of software that are deployed.
<!--l. 9--><p class="noindent" >Control of <a 
href="mainli2.html#glo:component">Components</a> is handled by inheriting from the <span 
class="ectt-1200">CF::Resource </span>interface, which in
turn inherits from <span 
class="ectt-1200">CF::LifeCycle</span>, <span 
class="ectt-1200">CF::PortSupplier</span>, <span 
class="ectt-1200">CF::PropertySet</span>, and
<span 
class="ectt-1200">CF::TestableObject</span>. <span 
class="ectt-1200">CF::Resource </span>thus implements a wide range of methods including
<span 
class="ectt-1200">initialize()</span>, <span 
class="ectt-1200">releaseObject()</span>, <span 
class="ectt-1200">getPort()</span>, <span 
class="ectt-1200">configure()</span>, <span 
class="ectt-1200">query()</span>, <span 
class="ectt-1200">runTest()</span>,
<span 
class="ectt-1200">start() </span>and <span 
class="ectt-1200">stop()</span>. These methods allow the user to manipulate and customize their
<a 
href="mainli2.html#glo:component">Components</a> to achieve the exact behavior they desire in all phases of the <a 
href="mainli2.html#glo:component">Component</a>&#8217;s life
cycle.
<!--l. 14--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">12.2   </span> <a 
 id="x14-23100012.2"></a>Overview of Functionality</h3>
<!--l. 16--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">12.2.1   </span> <a 
 id="x14-23200012.2.1"></a>Life Cycle</h4>
<!--l. 18--><p class="noindent" >The set up and tear down of resources are handled through the Life Cycle interface. The method
<span 
class="ectt-1200">initialize() </span>is used to get a <a 
href="mainli2.html#glo:component">Component</a> into its known initial state, by allocating data or setting
structures to their proper initial values. <span 
class="ectt-1200">releaseObject() </span>is used to tear down a <a 
href="mainli2.html#glo:component">Component</a> by
freeing up any resources used by the <a 
href="mainli2.html#glo:component">Component</a>. <span 
class="ectt-1200">initialize() </span>can be thought of as a
framework-level constructor, while <span 
class="ectt-1200">releaseObject() </span>can be thought of as a framework level
destructor. As such, they are generally called at the beginning and end of the <a 
href="mainli2.html#glo:component">Component</a>&#8217;s
respective life cycle.
<!--l. 24--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">12.2.2   </span> <a 
 id="x14-23300012.2.2"></a>Port Supplier</h4>
                                                                                         
                                                                                         
<!--l. 26--><p class="noindent" >Access to <a 
href="mainli2.html#glo:port">Ports</a> are controlled through the <a 
href="mainli2.html#glo:port">Port</a> Supplier interface where <span 
class="ectt-1200">getPort() </span>is used to
obtain a specific uses (output) or provides (input) <a 
href="mainli2.html#glo:port">Port</a>. The method is passed a string containing
the name of the desired <a 
href="mainli2.html#glo:port">Port</a>, and then an object reference to that <a 
href="mainli2.html#glo:port">Port</a> is returned. If no <a 
href="mainli2.html#glo:port">Ports</a> are
found, an <span 
class="ectt-1200">UnknownPort </span>exception is thrown. This allows the user to obtain an object that provides
the ability to receive data in and push data out of the <a 
href="mainli2.html#glo:component">Component</a>. Each <a 
href="mainli2.html#glo:component">Component</a> can
have zero to many input and output <a 
href="mainli2.html#glo:port">Ports</a> which are specified in the <a 
href="mainli2.html#glo:component">Component</a>&#8217;s <a 
href="mainap14.html#scd">SCD</a>
file.
<!--l. 32--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">12.2.3   </span> <a 
 id="x14-23400012.2.3"></a>Property Set</h4>
<!--l. 35--><p class="noindent" ><a 
href="mainli2.html#glo:property">Property</a> control is handled through the <span 
class="ectt-1200">configure() </span>and <span 
class="ectt-1200">query() </span>methods. The <span 
class="ectt-1200">configure()</span>
method takes in a list of <a 
href="mainap14.html#id">ID</a> and value pairs and attempts to set them. An Invalid Configuration
error is thrown if no <a 
href="mainli2.html#glo:property">Properties</a> in the list are able to be set. A Partial Configuration error is
thrown if at least one, but not all <a 
href="mainli2.html#glo:property">Properties</a> are set. The <span 
class="ectt-1200">query() </span>method serves as the getter for
the <a 
href="mainli2.html#glo:component">Component</a>&#8217;s <a 
href="mainli2.html#glo:property">Properties</a>. If the <span 
class="ectt-1200">query() </span>method is passed an empty list, it returns all of the
<a 
href="mainli2.html#glo:component">Component</a>&#8217;s <a 
href="mainli2.html#glo:property">Properties</a>. Otherwise, it returns any valid <a 
href="mainli2.html#glo:property">Properties</a> based on the <a 
href="mainap14.html#id">ID</a> and value pair
passed in as a parameter.
<!--l. 42--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">12.2.4   </span> <a 
 id="x14-23500012.2.4"></a>Testable Object</h4>
<!--l. 44--><p class="noindent" >In the Testable Object interface, <span 
class="ectt-1200">runTest() </span>is defined to provide a means to perform stand-alone
testing of a <a 
href="mainli2.html#glo:component">Component</a>. Test <a 
href="mainap14.html#id">ID</a>s and a set of test values are passed in as parameters, with the test
results returned in the test values parameter. This method gives the <a 
href="mainli2.html#glo:component">Component</a> the ability to
be &#8220;black box&#8221; tested where an input is provided in an attempt to match the actual
output with the desired output without any knowledge of the <a 
href="mainli2.html#glo:component">Component</a>&#8217;s internal
structure.
<h3 class="sectionHead"><span class="titlemark">12.3   </span> <a 
 id="x14-23600012.3"></a>Examples</h3>
<!--l. 48--><p class="noindent" >This section provides code examples of the methods described above for each of the supported
programming languages.
                                                                                         
                                                                                         
<!--l. 50--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">12.3.1   </span> <a 
 id="x14-23700012.3.1"></a><span 
class="ectt-1200">CF::LifeCycle</span></h4>
<!--l. 52--><p class="noindent" >
<h5 class="subsubsectionHead"><span class="titlemark">12.3.1.1   </span> <a 
 id="x14-23800012.3.1.1"></a><span 
class="ectt-1200">initialize()</span></h5>
<!--l. 54--><p class="noindent" ><span 
class="ecbx-1200">C++</span>
<div class="minipage"><script type="syntaxhighlighter" class="brush: cpp"><![CDATA[
try {
     this->initialize();
} catch (CF::LifeCycle::InitializeError e){
     // error reporting
}

]]></script></div>
<!--l. 65--><p class="noindent" ><span 
class="ecbx-1200">Python</span>
<div class="minipage"><script type="syntaxhighlighter" class="brush: python"><![CDATA[
try:
     self.initialize()
except:
     # error reporting
]]></script></div>
<!--l. 74--><p class="noindent" ><span 
class="ecbx-1200">Java</span>
<div class="minipage"><script type="syntaxhighlighter" class="brush: java"><![CDATA[
try {
     this.initialize();
} catch (InitializeError e) {
     // error reporting
}
]]></script></div>
<!--l. 84--><p class="noindent" >
<h5 class="subsubsectionHead"><span class="titlemark">12.3.1.2   </span> <a 
 id="x14-23900012.3.1.2"></a><span 
class="ectt-1200">releaseObject()</span></h5>
                                                                                         
                                                                                         
<!--l. 86--><p class="noindent" ><span 
class="ecbx-1200">C++</span>
<div class="minipage"><script type="syntaxhighlighter" class="brush: cpp"><![CDATA[
try {
     this->releaseObject();
} catch (CF::LifeCycle::ReleaseError e){
     // error reporting
}
]]></script></div>
<!--l. 96--><p class="noindent" ><span 
class="ecbx-1200">Python</span>
<div class="minipage"><script type="syntaxhighlighter" class="brush: python"><![CDATA[
try:
     self.releaseObject()
except:
     # error reporting
]]></script></div>
<!--l. 105--><p class="noindent" ><span 
class="ecbx-1200">Java</span>
<div class="minipage"><script type="syntaxhighlighter" class="brush: java"><![CDATA[
try {
     this.releaseObject();
} catch (ReleaseError e) {
     // error reporting
}
]]></script></div>
<!--l. 115--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">12.3.2   </span> <a 
 id="x14-24000012.3.2"></a><span 
class="ectt-1200">CF::PortSupplier</span></h4>
<!--l. 117--><p class="noindent" >
<h5 class="subsubsectionHead"><span class="titlemark">12.3.2.1   </span> <a 
 id="x14-24100012.3.2.1"></a><span 
class="ectt-1200">getPort()</span></h5>
<!--l. 119--><p class="noindent" ><span 
class="ecbx-1200">C++</span>
                                                                                         
                                                                                         
<div class="minipage"><script type="syntaxhighlighter" class="brush: cpp"><![CDATA[
try {
     CORBA::Object_var port = this->getPort("my_port");
} catch (CF::PortSupplier::UnknownPort e){
     // error reporting
}
]]></script></div>
<!--l. 129--><p class="noindent" ><span 
class="ecbx-1200">Python</span>
<div class="minipage"><script type="syntaxhighlighter" class="brush: python"><![CDATA[
try:
     port = self.getPort("my_port")
except:
     # error reporting
]]></script></div>
<!--l. 138--><p class="noindent" ><span 
class="ecbx-1200">Java</span>
<div class="minipage"><script type="syntaxhighlighter" class="brush: java"><![CDATA[
try {
     org.omg.CORBA.Object port = this.getPort("my_port");
} catch (UnknownPort e) {
     // error reporting
}
]]></script></div>
<!--l. 148--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">12.3.3   </span> <a 
 id="x14-24200012.3.3"></a><span 
class="ectt-1200">CF::PropertySet</span></h4>
<!--l. 152--><p class="noindent" >
<h5 class="subsubsectionHead"><span class="titlemark">12.3.3.1   </span> <a 
 id="x14-24300012.3.3.1"></a><span 
class="ectt-1200">configure()</span></h5>
<!--l. 154--><p class="noindent" ><span 
class="ecbx-1200">C++</span>
                                                                                         
                                                                                         
<div class="minipage"><script type="syntaxhighlighter" class="brush: cpp"><![CDATA[
CF::Properties props;
props.length(2);

CF::DataType string_var;
string_var.id = "string_prop";
string_var.value &lt;&lt;= "my string prop";
props[0] = string_var;

CF::DataType long_var;
long_var.id = "long_prop";
long_var.value &lt;&lt;= 1234;
props[1] = long_var;

try {
     this->configure(props);
} catch (CF::PropertySet::InvalidConfiguration e) {
     // error reporting
} catch (CF::PropertySet::PartialConfiguration e) {
     // error reporting
}
]]></script></div>
<!--l. 179--><p class="noindent" ><span 
class="ecbx-1200">Python</span>
<div class="minipage"><script type="syntaxhighlighter" class="brush: python"><![CDATA[
prop = CF.DataType(id="prop", value=CORBA.Any(CORBA.TC_long, 1))
try:
     self.configure([prop])
except:
     # error reporting
]]></script></div>
<!--l. 189--><p class="noindent" ><span 
class="ecbx-1200">Java</span>
                                                                                         
                                                                                         
<div class="minipage"><script type="syntaxhighlighter" class="brush: java"><![CDATA[
DataType[] props = new DataType[2];
props[0] = new DataType("prop",
     AnyUtils.toAny("my prop", TCKind.tk_string));
props[1] = new DataType("prop2",
     AnyUtils.toAny(
     AnyUtils.convertString("123", "long"), TCKind.tk_long));
try {
     this.configure(props);
} catch (InvalidConfiguration e) {
     // error reporting
} catch (PartialConfiguration e) {
     // error reporting
}
]]></script></div>
<!--l. 207--><p class="noindent" >
<h5 class="subsubsectionHead"><span class="titlemark">12.3.3.2   </span> <a 
 id="x14-24400012.3.3.2"></a><span 
class="ectt-1200">query()</span></h5>
<!--l. 209--><p class="noindent" ><span 
class="ecbx-1200">C++</span>
<div class="minipage"><script type="syntaxhighlighter" class="brush: cpp"><![CDATA[
CF::Properties props;
try {
  // queries all properties
  this->query(props);
  for (unsigned int i = 0; i < props.length(); i++){
       // iterates through returned properties and prints ids
       std::cout &lt;&lt; props[i].id &lt;&lt; std::endl;
  }
} catch (CF::UnknownProperties e) {
  // error reporting
}
]]></script></div>
<!--l. 225--><p class="noindent" ><span 
class="ecbx-1200">Python</span>
                                                                                         
                                                                                         
<div class="minipage"><script type="syntaxhighlighter" class="brush: python"><![CDATA[
try:
  # queries all properties
  props = self.query([])
  for prop in props:
     # iterates through returned properties and prints ids
     print prop.id
except:
  # error reporting
]]></script></div>
<!--l. 238--><p class="noindent" ><span 
class="ecbx-1200">Java</span>
<div class="minipage"><script type="syntaxhighlighter" class="brush: java"><![CDATA[
PropertiesHolder props =
     new PropertiesHolder(new CF.DataType[0]);
try {
     // queries all properties
     this.query(props);
     for (int i = 0; i < props.value.length; i ++){
         // iterates through returned properties and prints ids
         System.out.println(props.value[i].id);
     }
} catch (UnknownProperties e1) {
     // error reporting
}
]]></script></div>
<!--l. 255--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">12.3.4   </span> <a 
 id="x14-24500012.3.4"></a><span 
class="ectt-1200">CF::TestableObject</span></h4>
<!--l. 257--><p class="noindent" >
<h5 class="subsubsectionHead"><span class="titlemark">12.3.4.1   </span> <a 
 id="x14-24600012.3.4.1"></a><span 
class="ectt-1200">runTest()</span></h5>
<!--l. 259--><p class="noindent" ><span 
class="ecbx-1200">C++</span>
                                                                                         
                                                                                         
<div class="minipage"><script type="syntaxhighlighter" class="brush: cpp"><![CDATA[
CF::Properties props;
props.length(1);

CF::DataType test_var;
test_var.id = "prop";
test_var.value &lt;&lt;= 1234;
props[0] = test_var;

try {
     this->runTest(0, props);
} catch (CF::TestableObject::UnknownTest e) {
     // error reporting
} catch (CF::UnknownProperties e){
     // error reporting
}
]]></script></div>
<!--l. 279--><p class="noindent" ><span 
class="ecbx-1200">Python</span>
<div class="minipage"><script type="syntaxhighlighter" class="brush: python"><![CDATA[
prop = CF.DataType(id="prop", value=CORBA.Any(CORBA.TC_long, 1))
try:
  self.runTest(0, [prop])
except:
  # error reporting
]]></script></div>
<!--l. 289--><p class="noindent" ><span 
class="ecbx-1200">Java</span>
<div class="minipage"><script type="syntaxhighlighter" class="brush: java"><![CDATA[
DataType[] props = new DataType[1];
props[0] = new DataType("prop",
     AnyUtils.toAny("my prop", TCKind.tk_string));
PropertiesHolder holders = new PropertiesHolder(props);
try {
     this.runTest(0, holders);
} catch (UnknownTest e) {
     // error reporting
} catch (UnknownProperties e) {
     // error reporting
}
]]></script></div>
                                                                                         
                                                                                         
                                                                                         
                                                                                         
<!--l. 1--><div class="crosslinks"><p class="noindent">[<a 
href="mainch13.html" >next</a>] [<a 
href="mainch11.html" >prev</a>] [<a 
href="mainch11.html#tailmainch11.html" >prev-tail</a>] [<a 
href="mainch12.html" >front</a>] [<a 
href="main.html#mainch12.html" >up</a>] </p></div>
<!--l. 1--><p class="noindent" ><a 
 id="tailmainch12.html"></a>    
 
<div class=license>  
<hr> 
<a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-sa/3.0/80x15.png" /></a><br /><span xmlns:dct="http:// purl.org/dc/terms/" property="dct:title">REDHAWK Documentation</span> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_US">Creative Commons Attribution-ShareAlike 3.0 Unported License</a>. 
 
</div></section></div> 
</body></html> 
