<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>12 Runtime Environment Inspection</title> 
<meta http-equiv="Content-Type" content="text/html; charset="utf-8""> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- html,2,next,javascript,charset="utf-8" --> 
<meta name="src" content="main.tex"> 
<link rel="stylesheet" type="text/css" href="main.css"> 
<script type="text/javascript" src="scripts/shCore.js"></script> 
<script type="text/javascript" src="scripts/shBrushCpp.js"></script> 
<script type="text/javascript" src="scripts/shBrushJava.js"></script> 
<script type="text/javascript" src="scripts/shBrushPython.js"></script> 
<script type="text/javascript" src="scripts/shBrushBash.js"></script> 
<script type="text/javascript" src="scripts/shBrushXml.js"></script> 
<link href="styles/shCore.css" rel="stylesheet" type="text/css" /> 
<link href="styles/shThemeDefault.css" rel="stylesheet" type="text/css" /> 
<script type="text/javascript"> 
SyntaxHighlighter.all() 
</script> 
 </head><body 
>
<link rel="icon" type="image/png" href="images/RedHawk_Logo16x.gif"> 
<script> 
function f() {  
document.getElementById('main_content_wrap').focus(); 
} 
if (window.addEventListener) { 
window.addEventListener("load", f, false); 
} else if (window.attachEvent) { 
window.attachEvent("onload", f); 
} 
</script> 
<div class="header"> 
<ul class="navbar"> 
<li><a class="logo-small" href="index.html"><img src="images/RedHawk_Logo_ALT_B_121px.png"/></a></li> <li><a href="index.html">Home</a></li> 
<li><a class="active" href="documentation.html">Documentation</a></li> 
<li><a href="download.html">Download</a></li> 
<li><a href="community.html">Community</a></li> 
</ul> 
<div class="pattern right"></div> 
<a id="forkme_banner" href="https://github.com/redhawksdr">View on GitHub</a> 
<noscript><div class ="NoScript">WARNING: JAVASCRIPT is not enabled. JAVASCRIPT is required for viewing code snippets.</div></noscript> 
</div> 
<!-- Custom MAIN CONTENT --> 
<div id="main_content_wrap" tabindex="0" class="outer"> 
<section id="main_content" class="inner"> 
<!--l. 1--><div class="crosslinks"><p class="noindent">[<a 
href="mainch13.html" >next</a>] [<a 
href="mainch11.html" >prev</a>] [<a 
href="mainch11.html#tailmainch11.html" >prev-tail</a>] [<a 
href="#tailmainch12.html">tail</a>] [<a 
href="main.html#mainch12.html" >up</a>] </p></div>
<h2 class="chapterHead"><span class="titlemark">Chapter&#x00A0;12</span><br /><a 
 id="x14-30600012"></a>Runtime Environment Inspection</h2>
<h3 class="sectionHead"><span class="titlemark">12.1   </span> <a 
 id="x14-30700012.1"></a>Introduction</h3>
<!--l. 6--><p class="noindent" >During runtime, there are a large number of operations that are handled under the hood by the
REDHAWK Core Framework. At times though, it becomes necessary to take a closer look at
these underlying parts to ensure that they are working properly or to inspect what kind
of a state they are currently in. REDHAWK provides tools to help accomplish this
task.
<!--l. 10--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">12.2   </span> <a 
 id="x14-30800012.2"></a>REDHAWK Module</h3>
<!--l. 12--><p class="noindent" >A Python module called REDHAWK is provided with the capability to interact with running
<a 
href="mainli2.html#glo:domain">Domains</a>, <a 
href="mainli2.html#glo:device">Devices</a>, <a 
href="mainli2.html#glo:waveformapplication">Waveforms</a> and <a 
href="mainli2.html#glo:component">Components</a>. This allows for individual control and assessment
over all aspects of a runtime environment.
<!--l. 15--><p class="noindent" >In order to use the REDHAWK utility module, begin a Python session from a terminal and enter
the following command:
<div class="minipage"><script type="syntaxhighlighter" class="brush: python"><![CDATA[
 $ python
 Python 2.6.6 (r266:84292, Aug 28 2012, 10:55:56)
 [GCC 4.4.6 20120305 (Red Hat 4.4.6-4)] on linux2
 Type "help", "copyright", "credits" or "license" for more
 information.
 &gt;&gt;> from ossie.utils import redhawk
]]></script></div>
<!--l. 26--><p class="noindent" >The REDHAWK module is built on the same foundation as the <a 
href="mainli2.html#glo:Sandbox">Sandbox</a>, and provides a
compatible interface for domain objects. <a 
href="mainli2.html#glo:Sandbox">Sandbox</a> objects, including plots, can be dynamically
connected to <a 
href="mainli2.html#glo:device">Devices</a>, <a 
href="mainli2.html#glo:waveformapplication">Waveforms</a> and <a 
href="mainli2.html#glo:component">Components</a> running in the domain.
<!--l. 29--><p class="noindent" >Refer to <a 
href="mainch10.html#x12-22500010.2.4">Section 10.2.4</a> for details about interacting with <a 
href="mainli2.html#glo:component">Components</a> and <a 
href="mainli2.html#glo:device">Devices</a> in
Python.
                                                                                         
                                                                                         
<!--l. 31--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">12.2.1   </span> <a 
 id="x14-30900012.2.1"></a>Attach</h4>
<!--l. 33--><p class="noindent" >The module provides the ability to attach to a running <a 
href="mainli2.html#glo:domain">Domain</a>.
<!--l. 35--><p class="noindent" >This allows the user access to the underlying <a 
href="mainap9.html#api">API</a> of the <a 
href="mainli2.html#glo:domainmanager">Domain Manager</a> in addition to other
useful functionality:
      <ul class="itemize1">
      <li class="itemize"><span 
class="ectt-1200">createApplication() </span>- install/create a particular <a 
href="mainli2.html#glo:waveformapplication">Waveform</a>
      </li>
      <li class="itemize"><span 
class="ectt-1200">removeApplication() </span>- release a particular <a 
href="mainli2.html#glo:waveformapplication">Waveform</a></li></ul>
<!--l. 42--><p class="noindent" >To attach to an existing <a 
href="mainli2.html#glo:domain">Domain</a>, the name must be passed as an argument.
<!--l. 44--><p class="noindent" >Assuming the <a 
href="mainli2.html#glo:domain">Domain</a> name is <span 
class="ectt-1200">MY_DOMAIN</span>, start a Python script and enter:
<div class="minipage"><script type="syntaxhighlighter" class="brush: python"><![CDATA[
 &gt;&gt;> domain = redhawk.attach("MY_DOMAIN")
]]></script></div>
<!--l. 50--><p class="noindent" >Note that if there is only 1 Domain visible, no argument is needed for the attach call:
<div class="minipage"><script type="syntaxhighlighter" class="brush: python"><![CDATA[
 &gt;&gt;> domain = redhawk.attach()
]]></script></div>
<!--l. 56--><p class="noindent" >Once attached to the running <a 
href="mainli2.html#glo:domain">Domain</a>, <a 
href="mainli2.html#glo:waveformapplication">Waveforms</a> that are installed in the <span 
class="ectt-1200">$SDRROOT </span>can easily be
launched using the <span 
class="ectt-1200">createApplication() </span>function:
<div class="minipage"><script type="syntaxhighlighter" class="brush: python"><![CDATA[
&gt;&gt;> wave =
     domain.createApplication("/waveforms/wave/wave.sad.xml")
]]></script></div>
<!--l. 63--><p class="noindent" >Upon success, the above call returns an   <a 
href="mainli2.html#glo:application"><span 
class="ectt-1200">Application</span></a> object which gives access to the external
resource <a 
href="mainap9.html#api">API</a>. This allows for manual operation of the <a 
href="mainli2.html#glo:application">Application</a>. In addition, functions exist to
allow the user to connect and disconnect <a 
href="mainli2.html#glo:port">Ports</a>. Finally, in order to inspect the current conditions
of the <a 
href="mainli2.html#glo:waveformapplication">Waveform</a>, an <a 
href="mainap9.html#api">API</a> function call is available. This shows any external <a 
href="mainli2.html#glo:port">Ports</a>, <a 
href="mainli2.html#glo:component">Components</a>
that are in the <a 
href="mainli2.html#glo:application">Application</a>, and their <a 
href="mainli2.html#glo:property">Properties</a>.
                                                                                         
                                                                                         
<div class="minipage"><script type="syntaxhighlighter" class="brush: python"><![CDATA[
&gt;&gt;> wave
<ossie.utils.redhawk.core.App object at 0x2bfb350>
&gt;&gt;> wave.api()
Waveform [wave_025_090314360_1]
---------------------------------------------------
External Ports ==============
Provides (Input) Ports ==============
Port Name     Port Interface
---------     --------------
external_in   IDL:BULKIO/dataChar


Uses (Output) Ports ==============
Port Name     Port Interface
---------     --------------
external_out  IDL:BULKIO/UsesPortStatisticsProvider


Components ==============
1. Sink
2. Source (Assembly Controller)


Properties ==============
Property Name    (Data Type)      [Default Value]   Current Value
-------------    -----------      ---------------   -------------
sample_size      (long/SL/32t)    None              None

]]></script></div>
<!--l. 100--><p class="noindent" >Once finished, the <a 
href="mainli2.html#glo:waveformapplication">Waveform</a> needs to be removed from the <a 
href="mainli2.html#glo:domain">Domain</a> by using the
<span 
class="ectt-1200">removeApplication() </span>method:
<div class="minipage"><script type="syntaxhighlighter" class="brush: python"><![CDATA[
&gt;&gt;> domain.removeApplication(wave)
]]></script></div>
<!--l. 106--><p class="noindent" >
                                                                                         
                                                                                         
<h4 class="subsectionHead"><span class="titlemark">12.2.2   </span> <a 
 id="x14-31000012.2.2"></a>Starting a Domain from within a Python session</h4>
<!--l. 108--><p class="noindent" >Normally, the REDHAWK Python package is used to either interact with a running <a 
href="mainli2.html#glo:domain">Domain</a>, or to
launch some Sandbox <a 
href="mainli2.html#glo:component">Components</a>, as seen in Chapter <a 
href="mainch10.html#x12-21900010">10<!--tex4ht:ref: chap:Sandbox --></a>. However, sometimes it may be required
to launch a <a 
href="mainli2.html#glo:domain">Domain</a> from a Python script.
<!--l. 111--><p class="noindent" >To help in such a scenario, the REDHAWK Python package includes some helper functions. The
<span 
class="ectt-1200">kickDomain </span>feature allows for an easy way to launch <a 
href="mainli2.html#glo:domain">Domain</a> and <a 
href="mainli2.html#glo:devicemanager">Device Managers</a> from within a
Python script. With no arguments, the function launches and returns the <a 
href="mainli2.html#glo:domainmanager">Domain Manager</a> that is
installed in <span 
class="ectt-1200">$SDRROOT</span>. Additionally, all <a 
href="mainli2.html#glo:devicemanager">Device Managers</a> in <span 
class="ectt-1200">$SDRROOT/dev/nodes </span>are
started.
<!--l. 116--><p class="noindent" >Other arguments to the function exist to control different aspects to how the <a 
href="mainli2.html#glo:domain">Domain</a> is started. A
list of specific <a 
href="mainli2.html#glo:devicemanager">Device Managers</a> to start can be passed if the user does not want to start all
available. If the <span 
class="ectt-1200">$SDRROOT </span>that the user wishes to use is not in the standard location, a path can be
supplied to direct the function to the desired place in the file system. Standard out and logging to
a file can also be set.
<div class="minipage"><script type="syntaxhighlighter" class="brush: python"><![CDATA[
&gt;&gt;> domain = redhawk.kickDomain()
INFO:DomainManager - Starting Domain Manager
INFO:DeviceManager - Starting Device Manager with
     /nodes/DevMgr_localhost.localdomain/DeviceManager.dcd.xml
INFO:DomainManager - Starting ORB!
INFO:DeviceManager_impl - Connecting to Domain Manager
     MY_DOMAIN/MY_DOMAIN
INFO:DeviceManager - Starting ORB!
&gt;&gt;> INFO:DCE:9d9bcc38-d654-43b1-8b74-1dc024318b6f:Registering
     Device
INFO:DeviceManager_impl - Registering device GPP_localhost_
     localdomain on
     Device Manager DevMgr_localhost.localdomain
INFO:DeviceManager_impl - Initializing device GPP_localhost_
     localdomain on
     Device Manager DevMgr_localhost.localdomain
INFO:DeviceManager_impl - Registering device GPP_localhost_
     localdomain on
     Domain Manager

&gt;&gt;> domain
<ossie.utils.redhawk.core.Domain object at 0x2da6710>
]]></script></div>
<!--l. 146--><p class="noindent" >The ability to search for <a 
href="mainli2.html#glo:domain">Domains</a> is also available through the scan function which searches the
                                                                                         
                                                                                         
<a 
href="mainli2.html#glo:namingservice">Naming Service</a>.
<div class="minipage"><script type="syntaxhighlighter" class="brush: python"><![CDATA[
&gt;&gt;> redhawk.scan()
['MY_DOMAIN']
]]></script></div>
<!--l. 153--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">12.2.3   </span> <a 
 id="x14-31100012.2.3"></a>Domain State</h4>
<!--l. 155--><p class="noindent" >The <a 
href="mainli2.html#glo:domain">Domain</a> proxy tracks the current state of the <a 
href="mainli2.html#glo:domain">Domain</a>. For aspects of the <a 
href="mainli2.html#glo:domain">Domain</a> state that
may take a long time to process, scanning is deferred until the first access. If the <a 
href="mainap9.html#odm">ODM</a> Channel is
available, <a 
href="mainli2.html#glo:device">Devices</a>, <a 
href="mainli2.html#glo:devicemanager">Device Managers</a>, and <a 
href="mainli2.html#glo:waveformapplication">Waveforms</a> are tracked as they are added to and removed
from the <a 
href="mainli2.html#glo:domain">Domain</a>. Otherwise, the <a 
href="mainli2.html#glo:domain">Domain</a> is re-scanned on access to ensure that the state is
accurate.
<!--l. 160--><p class="noindent" >
<h5 class="subsubsectionHead"><span class="titlemark">12.2.3.1   </span> <a 
 id="x14-31200012.2.3.1"></a>Applications</h5>
<!--l. 163--><p class="noindent" >The <a 
href="mainli2.html#glo:domain">Domain</a> proxy provides a list of <a 
href="mainli2.html#glo:waveformapplication">Waveforms</a> currently running via the <span 
class="ectt-1200">apps </span>attribute:
<div class="minipage"><script type="syntaxhighlighter" class="brush: python"><![CDATA[
&gt;&gt;> domain.apps
[<ossie.utils.redhawk.core.App object at 0x<hex address&gt;&gt;, ...]
]]></script></div>
<!--l. 170--><p class="noindent" >The <span 
class="ectt-1200">App </span>class supports many of the <a 
href="mainli2.html#glo:Sandbox">Sandbox</a> interfaces, such as <a 
href="mainli2.html#glo:property">Properties</a>, <span 
class="ectt-1200">connect() </span>and
<span 
class="ectt-1200">api()</span>.
<!--l. 172--><p class="noindent" >The <a 
href="mainli2.html#glo:component">Components</a> within the <a 
href="mainli2.html#glo:waveformapplication">Waveform</a> are available via the <span 
class="ectt-1200">comps </span>attribute:
<div class="minipage"><script type="syntaxhighlighter" class="brush: python"><![CDATA[
&gt;&gt;> app = domain.apps[0]
&gt;&gt;> app.comps
[<ossie.utils.redhawk.component.Component object at 0x<hex address&gt;&gt;, ...]
]]></script></div>
<!--l. 180--><p class="noindent" >The REDHAWK module <a 
href="mainli2.html#glo:component"><span 
class="ectt-1200">Component</span></a> class supports the same interfaces as <a 
href="mainli2.html#glo:Sandbox">Sandbox</a> <a 
href="mainli2.html#glo:component">Components</a>,
as seen in Chapter <a 
href="mainch10.html#x12-21900010">10<!--tex4ht:ref: chap:Sandbox --></a>. Much like in the Sandbox, <a 
href="mainli2.html#glo:port">Ports</a>, <a 
href="mainli2.html#glo:property">Properties</a>, and any other feature of a
                                                                                         
                                                                                         
<a 
href="mainli2.html#glo:component">Component</a> is equally accessible from the Python environment, regardless of how the <a 
href="mainli2.html#glo:component">Component</a>
was deployed.
<!--l. 183--><p class="noindent" >For example, if one were to want to plot the output of a <a 
href="mainli2.html#glo:component">Component</a> running on the
Domain:
<div class="minipage"><script type="syntaxhighlighter" class="brush: python"><![CDATA[
&gt;&gt;> from ossie.utils import redhawk, sb
&gt;&gt;> dom=redhawk.attach()
&gt;&gt;> for app in dom.apps:
...  if app.name == "my_app":
...   break

&gt;&gt;> for comp in app.comps:
...  if comp.name == "my_comp":
...   break

&gt;&gt;> plot = sb.LinePlot()
&gt;&gt;> plot.start()
&gt;&gt;> comp.connect(plot)
]]></script></div>
<!--l. 201--><p class="noindent" >
<h5 class="subsubsectionHead"><span class="titlemark">12.2.3.2   </span> <a 
 id="x14-31300012.2.3.2"></a>Device Managers</h5>
<!--l. 203--><p class="noindent" >The <a 
href="mainli2.html#glo:domain">Domain</a> proxy provides a list of <a 
href="mainli2.html#glo:devicemanager">Device Managers</a> registered with the <a 
href="mainli2.html#glo:domain">Domain</a> via the <span 
class="ectt-1200">devMgrs</span>
attribute:
<div class="minipage"><script type="syntaxhighlighter" class="brush: python"><![CDATA[
&gt;&gt;> domain.devMgrs
[<ossie.utils.redhawk.core.DeviceManager object at 0x<hex address&gt;&gt;, ...]
]]></script></div>
<!--l. 210--><p class="noindent" >Each <a 
href="mainli2.html#glo:devicemanager">Device Manager</a> maintains a list of its <a 
href="mainli2.html#glo:device">Devices</a>, accessible via the <span 
class="ectt-1200">devs </span>attribute:
<div class="minipage"><script type="syntaxhighlighter" class="brush: python"><![CDATA[
&gt;&gt;> domain.devMgrs[0].devs
[<ossie.utils.redhawk.device.ExecutableDevice object at 0x<hex address&gt;&gt;, ...]
]]></script></div>
                                                                                         
                                                                                         
<!--l. 217--><p class="noindent" >
<h5 class="subsubsectionHead"><span class="titlemark">12.2.3.3   </span> <a 
 id="x14-31400012.2.3.3"></a>Devices</h5>
<!--l. 219--><p class="noindent" >The <a 
href="mainli2.html#glo:domain">Domain</a> proxy provides a list of all <a 
href="mainli2.html#glo:device">Devices</a> registered with the <a 
href="mainli2.html#glo:domain">Domain</a> via the <span 
class="ectt-1200">devices</span>
attribute:
<div class="minipage"><script type="syntaxhighlighter" class="brush: python"><![CDATA[
&gt;&gt;> domain.devices
[<ossie.utils.redhawk.device.ExecutableDevice object at 0x<hex address&gt;&gt;, ...]
]]></script></div>
<!--l. 226--><p class="noindent" >The <a 
href="mainli2.html#glo:device">Device</a> list is the concatenation of the <a 
href="mainli2.html#glo:device">Devices</a> for all <a 
href="mainli2.html#glo:devicemanager">Device Managers</a>.
<!--l. 228--><p class="noindent" >The REDHAWK module <a 
href="mainli2.html#glo:device"><span 
class="ectt-1200">Device</span></a> class supports the same interfaces as <a 
href="mainli2.html#glo:Sandbox">Sandbox</a> <a 
href="mainli2.html#glo:device">Devices</a>.
<!--l. 230--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">12.2.4   </span> <a 
 id="x14-31500012.2.4"></a>Using With the Sandbox</h4>
<!--l. 232--><p class="noindent" >As shown briefly in section <a 
href="#x14-31200012.2.3.1">12.2.3.1<!--tex4ht:ref: subsubsec:apps --></a>, <a 
href="mainli2.html#glo:Sandbox">Sandbox</a> and <a 
href="mainli2.html#glo:domain">Domain</a> objects are interoperable and can be
connected together. This allows for inspection of different parts of the domain and more
sophisticated testing of <a 
href="mainli2.html#glo:component">Components</a>.
<!--l. 235--><p class="noindent" >For example, to use a <a 
href="mainli2.html#glo:Sandbox">Sandbox</a> plot to view the data coming from a device, enter the following
commands:
<div class="minipage"><script type="syntaxhighlighter" class="brush: python"><![CDATA[
&gt;&gt;> from ossie.utils import sb
&gt;&gt;> plot = sb.LinePlot()
&gt;&gt;> domain.devices[1].connect(plot)
&gt;&gt;> plot.start()
]]></script></div>
<!--l. 244--><p class="noindent" >Use the following commands to capture an approximately one second cut from a <a 
href="mainli2.html#glo:waveformapplication">Waveform</a> to a
file:
<div class="minipage"><script type="syntaxhighlighter" class="brush: python"><![CDATA[
&gt;&gt;> import time
&gt;&gt;> sink = sb.FileSink("/data/tuner_out.dat")
&gt;&gt;> domain.apps[0].connect(sink, usesPortName="tuner_out")
&gt;&gt;> sink.start()
&gt;&gt;> time.sleep(1.0)
&gt;&gt;> sink.stop()
]]></script></div>
                                                                                         
                                                                                         
<!--l. 255--><p class="noindent" >When the <a 
href="mainli2.html#glo:Sandbox">Sandbox</a> exits, any connections made between <a 
href="mainli2.html#glo:Sandbox">Sandbox</a> objects and <a 
href="mainli2.html#glo:domain">Domain</a> objects are
broken to limit interference with normal domain operation.
<!--l. 257--><p class="noindent" >For more details on using the <a 
href="mainli2.html#glo:Sandbox">Sandbox</a>, refer to <a 
href="mainch10.html#x12-21900010">Chapter 10</a>.
                                                                                         
                                                                                         
<!--l. 1--><div class="crosslinks"><p class="noindent">[<a 
href="mainch13.html" >next</a>] [<a 
href="mainch11.html" >prev</a>] [<a 
href="mainch11.html#tailmainch11.html" >prev-tail</a>] [<a 
href="mainch12.html" >front</a>] [<a 
href="main.html#mainch12.html" >up</a>] </p></div>
<!--l. 1--><p class="noindent" ><a 
 id="tailmainch12.html"></a>   
 
<div class=license>  
<hr> 
<a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-sa/3.0/80x15.png" /></a><br /><span xmlns:dct="http:// purl.org/dc/terms/" property="dct:title">REDHAWK Documentation</span> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_US">Creative Commons Attribution-ShareAlike 3.0 Unported License</a>. 
 
</div></section></div> 
</body></html> 
