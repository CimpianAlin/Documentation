<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>24 Creating a REDHAWK Control Panel</title> 
<meta http-equiv="Content-Type" content="text/html; charset="utf-8""> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- html,2,next,javascript,charset="utf-8" --> 
<meta name="src" content="main.tex"> 
<link rel="stylesheet" type="text/css" href="main.css"> 
<script type="text/javascript" src="scripts/shCore.js"></script> 
<script type="text/javascript" src="scripts/shBrushCpp.js"></script> 
<script type="text/javascript" src="scripts/shBrushJava.js"></script> 
<script type="text/javascript" src="scripts/shBrushPython.js"></script> 
<script type="text/javascript" src="scripts/shBrushBash.js"></script> 
<script type="text/javascript" src="scripts/shBrushXml.js"></script> 
<link href="styles/shCore.css" rel="stylesheet" type="text/css" /> 
<link href="styles/shThemeDefault.css" rel="stylesheet" type="text/css" /> 
<script type="text/javascript"> 
SyntaxHighlighter.all() 
</script> 
 </head><body 
>
<link rel="icon" type="image/png" href="images/RedHawk_Logo16x.gif"> 
<script> 
function f() {  
document.getElementById('main_content_wrap').focus(); 
} 
if (window.addEventListener) { 
window.addEventListener("load", f, false); 
} else if (window.attachEvent) { 
window.attachEvent("onload", f); 
} 
</script> 
<div class="header"> 
<ul class="navbar"> 
<li><a class="logo-small" href="index.html"><img src="images/RedHawk_Logo_ALT_B_121px.png"/></a></li> <li><a href="index.html">Home</a></li> 
<li><a class="active" href="documentation.html">Documentation</a></li> 
<li><a href="download.html">Download</a></li> 
<li><a href="community.html">Community</a></li> 
</ul> 
<div class="pattern right"></div> 
<a id="forkme_banner" href="https://github.com/redhawksdr">View on GitHub</a> 
<noscript><div class ="NoScript">WARNING: JAVASCRIPT is not enabled. JAVASCRIPT is required for viewing code snippets.</div></noscript> 
</div> 
<!-- Custom MAIN CONTENT --> 
<div id="main_content_wrap" tabindex="0" class="outer"> 
<section id="main_content" class="inner"> 
<!--l. 1--><div class="crosslinks"><p class="noindent">[<a 
href="mainap1.html" >next</a>] [<a 
href="mainch23.html" >prev</a>] [<a 
href="mainch23.html#tailmainch23.html" >prev-tail</a>] [<a 
href="#tailmainch24.html">tail</a>] [<a 
href="main.html#mainch24.html" >up</a>] </p></div>
<h2 class="chapterHead"><span class="titlemark">Chapter&#x00A0;24</span><br /><a 
 id="x26-43900024"></a>Creating a REDHAWK Control Panel</h2>
<h3 class="sectionHead"><span class="titlemark">24.1   </span> <a 
 id="x26-44000024.1"></a>What is a Control Panel?</h3>
<!--l. 4--><p class="noindent" >A control panel is a contributed <a 
href="mainap14.html#ui">UI</a> Component for a specific <a 
href="mainli2.html#glo:domain">Domain</a> object to allow easier
interaction with that <a 
href="mainli2.html#glo:domain">Domain</a> object. These usually appear in either the <a 
href="mainli2.html#glo:property">Property</a> view or within
an editor.
<!--l. 8--><p class="noindent" >For example, all <a 
href="mainli2.html#glo:component">Components</a> and <a 
href="mainli2.html#glo:application">Applications</a> can be configured via the <a 
href="mainli2.html#glo:property"><span 
class="ecbx-1200">Property</span></a> view. While
powerful, this view can be confusing to end users who are not familiar with REDHAWK or with
the <a 
href="mainli2.html#glo:property">Properties</a>. Control panels allow the <a 
href="mainli2.html#glo:component">Component</a> or <a 
href="mainli2.html#glo:application">Application</a> developer to create a tailored
user experience.
<!--l. 13--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">24.1.1   </span> <a 
 id="x26-44100024.1.1"></a>Prerequisites</h4>
<!--l. 14--><p class="noindent" >To aid in understanding of the concepts and examples discussed in this chapter, the following
prerequisites should be met:
      <ul class="itemize1">
      <li class="itemize">The reader should have some level of Java programming experience.
      </li>
      <li class="itemize">The reader should have some level of understanding of Eclipse (specifically within the
      context of the REDHAWK <a 
href="mainap14.html#ide">IDE</a>).
      </li>
      <li class="itemize">Though  not  required,  basic  knowledge  of  Eclipse  Rich  Client  Platform  (<a 
href="mainap14.html#rcp">RCP</a>)
      development is helpful.</li></ul>
<!--l. 24--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">24.2   </span> <a 
 id="x26-44200024.2"></a>Creating a New REDHAWK Control Panel</h3>
                                                                                         
                                                                                         
<!--l. 27--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">24.2.1   </span> <a 
 id="x26-44300024.2.1"></a>New Control Panel Button</h4>
<!--l. 28--><p class="noindent" >The <span 
class="ecbx-1200">New Control Panel </span>button (<a 
href="#x26-443001r1">Figure 24.1</a>) is located in the top-right of the Overview panel of
the <a 
href="mainli2.html#glo:component">Component</a>, <a 
href="mainli2.html#glo:waveformapplication">Waveform</a>, <a 
href="mainli2.html#glo:device">Device</a>, <a 
href="mainli2.html#glo:service">Service</a>, and <a 
href="mainli2.html#glo:node">Node</a> development projects.
<!--l. 30--><p class="noindent" ><hr class="figure"><div class="figure" 
><table class="figure"><tr class="figure"><td class="figure" 
>
                                                                                         
                                                                                         
<a 
 id="x26-443001r1"></a>
                                                                                         
                                                                                         
<!--l. 32--><p class="noindent" ><img 
src="images/newControlPanel.png" alt="PIC"  
>
<br /> <table class="caption" 
><tr style="vertical-align:baseline;" class="caption"><td class="id">Figure&#x00A0;24.1: </td><td  
class="content"><span 
class="ecbx-1200">New Control Panel </span>Button</td></tr></table><!--tex4ht:label?: x26-443001r1 -->
                                                                                         
                                                                                         
<!--l. 35--><p class="noindent" ></td></tr></table></div><hr class="endfigure">
<!--l. 37--><p class="noindent" >The <span 
class="ecbx-1200">New Control Panel </span>button creates a new plug-in project and opens the main plug-in
project form editor. This editor is very similar to the <a 
href="mainap14.html#sca">SCA</a> <a 
href="mainli2.html#glo:component">Component</a> form editor. There are
multiple tabs to control various aspects of the plug-in project.
<!--l. 40--><p class="noindent" ><div class="admonition block tip block-indent"><div class="tip-inner"><p class="para block block-first">  Control panels are created within Eclipse plug-in projects. To learn more about Eclipse
development, refer to the Eclipse <a 
href="mainap14.html#ui">UI</a> Development References in <a 
href="mainap1.html#x27-455000A">Appendix A</a>. </p></div></div>
<h4 class="subsectionHead"><span class="titlemark">24.2.2   </span> <a 
 id="x26-44400024.2.2"></a>Control Panel Files</h4>
<!--l. 46--><p class="noindent" >The <span 
class="ecbx-1200">New Control Panel </span>button generates a number of files. To view these files, open the new
plug-in project and expand the <span 
class="ecbx-1200">src </span>directory. This section describes the control panel files that are
created by the <span 
class="ecbx-1200">New Control Panel </span>button.
      <ul class="itemize1">
      <li class="itemize"><span 
class="ectt-1200">src</span>: The Java source directory.
      </li>
      <li class="itemize"><span 
class="ectt-1200">src/SampleComponent.ui</span>: Directory containing the main control panel code.
      </li>
      <li class="itemize"><span 
class="ectt-1200">SampleComponentControlPanel.java</span>: The main control panel code. The main entry
      point is <span 
class="ectt-1200">createPartControl</span>; add developer-defined code here.
      </li>
      <li class="itemize"><span 
class="ectt-1200">SampleComponentContributor.java</span>:  Manages  custom  actions  associated  with  the
      control panel.
      </li>
      <li class="itemize"><span 
class="ectt-1200">SampleComponentPropertyFilter.java</span>: Dictates when the control panel is displayed
      in the <a 
href="mainli2.html#glo:property"><span 
class="ecbx-1200">Property</span></a> view.
      </li>
      <li class="itemize"><span 
class="ectt-1200">SampleComponentSection.java</span>: The <a 
href="mainli2.html#glo:property">Property</a> section in which the control panel is
      displayed by default.
      </li>
      <li class="itemize"><span 
class="ectt-1200">icons</span>: Directory containing graphics.
      </li>
      <li class="itemize"><span 
class="ectt-1200">META-INF/MANIFEST.MF</span>: The main Manifest file for the plug-in.
                                                                                         
                                                                                         
      </li>
      <li class="itemize"><span 
class="ectt-1200">build.properties</span>: Used by the plug-in builder when compiling.
      </li>
      <li class="itemize"><span 
class="ectt-1200">plugin.xml</span>: The plug-in manifest file which describes how the plug-in extends the
      platform, what extensions it publishes itself, and how it implements its functionality.</li></ul>
<!--l. 60--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">24.3   </span> <a 
 id="x26-44500024.3"></a>Programming with SWT and JFace</h3>
<!--l. 61--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">24.3.1   </span> <a 
 id="x26-44600024.3.1"></a>SWT</h4>
<!--l. 62--><p class="noindent" >The Standard Widget Toolkit (<a 
href="mainap14.html#swt">SWT</a>) is a widget toolkit for Java developers that provides a
portable <a 
href="mainap14.html#api">API</a> and tight integration with the underlying native <a 
href="mainap14.html#os">OS</a> <a 
href="mainap14.html#gui">GUI</a> platform.<br 
class="newline" /><br 
class="newline" /><a 
href="mainap14.html#swt">SWT</a> basic building blocks:
      <ul class="itemize1">
      <li class="itemize"><span 
class="ectt-1200">org.eclipse.swt.widgets.Label</span>: A basic label widget
      </li>
      <li class="itemize"><span 
class="ectt-1200">org.eclipse.swt.widgets.Button</span>: A basic button widget can be used with PUSH
      or RADIO or CHECK styles
      </li>
      <li class="itemize"><span 
class="ectt-1200">org.eclipse.swt.widgets.Text</span>: An input-text field
      </li>
      <li class="itemize"><span 
class="ectt-1200">org.eclipse.swt.widgets.Composite</span>: The main container widget
      </li>
      <li class="itemize"><span 
class="ectt-1200">org.eclipse.swt.widgets.Group</span>: A container widget with text and a border</li></ul>
<!--l. 71--><p class="noindent" >Some <a 
href="mainap14.html#swt">SWT</a> examples can be found at <a 
href="http://www.eclipse.org/swt/examples.php" class="url" ><span 
class="ectt-1200">http://www.eclipse.org/swt/examples.php</span></a>.
                                                                                         
                                                                                         
<!--l. 73--><p class="noindent" >
<h5 class="subsubsectionHead"><span class="titlemark">24.3.1.1   </span> <a 
 id="x26-44700024.3.1.1"></a>Examples</h5>
<!--l. 74--><p class="noindent" >To create a label: <div class="minipage"><script type="syntaxhighlighter" class="brush: java"><![CDATA[
Label label = new Label(main, SWT.None);
label.setText("Hello World");
]]></script></div>
<!--l. 80--><p class="noindent" >To create a text field: <div class="minipage"><script type="syntaxhighlighter" class="brush: java"><![CDATA[
Text text = new Text(main, SWT.BORDER);
text.setText("Initial Input");
]]></script></div>
<!--l. 86--><p class="noindent" >To use GridLayout and sub groups within the <span 
class="ectt-1200">createPartControl </span>method:
<div class="minipage"><script type="syntaxhighlighter" class="brush: java"><![CDATA[
public void createPartControl(final Composite main) {
     main.setLayout(new GridLayout(2, false));

     GridDataFactory factory =
        GridDataFactory.fillDefaults().grab(false, true);
     Group controlGroup = new Group(main,SWT.SHADOW_ETCHED_OUT);
     controlGroup.setLayoutData(factory.create());
     controlGroup.setText("Controls");
     createControlGroup(controlGroup);

     Group viewerGroup = new Group(main, SWT.SHADOW_ETCHED_OUT);
     viewerGroup.setLayoutData(factory.create());
     viewerGroup.setText("Plot");
}
]]></script></div>
<!--l. 104--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">24.3.2   </span> <a 
 id="x26-44800024.3.2"></a>JFace</h4>
<!--l. 105--><p class="noindent" >JFace is a <a 
href="mainap14.html#ui">UI</a> toolkit that provides helper classes for developing <a 
href="mainap14.html#ui">UI</a> features that can be tedious to
implement. JFace operates above the level of a raw widget system. It includes classes for handling
common <a 
href="mainap14.html#ui">UI</a> programming tasks:
      <ul class="itemize1">
                                                                                         
                                                                                         
      <li class="itemize">Viewers handle the drudgery of populating, sorting, filtering, and updating widgets. <br 
class="newline" /><span 
class="ectt-1200">org.eclipse.jface.viewers.TableViewer</span>
      </li>
      <li class="itemize">Actions and contributions introduce semantics for defining user actions and specifying
      where to make them available. <br 
class="newline" /><span 
class="ectt-1200">org.eclipse.jface.action.Action</span>
      </li>
      <li class="itemize">Image and font registries provide common patterns for handling <a 
href="mainap14.html#ui">UI</a> resources. <br 
class="newline" /><span 
class="ectt-1200">org.eclipse.swt.graphics.Image</span>
      </li>
      <li class="itemize">Dialogs and wizards define a framework for building complex interactions with the
      user. <br 
class="newline" /><span 
class="ectt-1200">org.eclipse.jface.wizard.Wizard</span>
      </li>
      <li class="itemize">Field assist provides classes that help guide the user in choosing appropriate content
      for fields in dialogs, wizards, or forms.</li></ul>
<!--l. 115--><p class="noindent" >JFace frees a developer up to focus on the implementation of a specific plug-in&#8217;s
function, rather than focusing on the underlying widget system or solving problems
that are common in almost any <a 
href="mainap14.html#ui">UI</a> application. Some JFace examples can be found at
<a 
href="http://wiki.eclipse.org/JFaceSnippets" class="url" ><span 
class="ectt-1200">http://wiki.eclipse.org/JFaceSnippets</span></a>.
<!--l. 118--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">24.4   </span> <a 
 id="x26-44900024.4"></a>Using the SCA Model in a Control Panel</h3>
<!--l. 120--><p class="noindent" >The REDHAWK back-end libraries provide implementations of various <a 
href="mainap14.html#sca">SCA</a> interfaces. To
facilitate interaction with the provided REDHAWK interface implementations in conjunction with
various <a 
href="mainap14.html#xml">XML</a> configuration files, the REDHAWK <a 
href="mainap14.html#ide">IDE</a> utilizes an underlying <a 
href="mainli2.html#glo:domain">Domain</a> model: the
<a 
href="mainap14.html#sca">SCA</a> Model. The <a 
href="mainap14.html#sca">SCA</a> Model uses the Eclipse Modeling Framework (<a 
href="mainap14.html#emf">EMF</a>).
<!--l. 124--><p class="noindent" >The control panel is passed, as its input, a reference to an <a 
href="mainap14.html#sca">SCA</a> Model object, such as a
<a 
href="mainli2.html#glo:component">Component</a>. The control panel uses this model object when interacting with the back-end
system. By using <a 
href="mainap14.html#emf">EMF</a> several common operations become easier, such as listening for
changes, displaying modeling objects within a viewer, and connecting model objects to text
fields.
<!--l. 132--><p class="noindent" >There are a few things the control panel developer should be aware of. REDHAWK is a remote
system; therefore, many of the calls within the <a 
href="mainap14.html#sca">SCA</a> Model may be blocking and the state within
the model may be stale.
                                                                                         
                                                                                         
<!--l. 136--><p class="noindent" >There are ways to identify and deal with these aspects:
      <ul class="itemize1">
      <li class="itemize">Blocking calls: All calls within the <a 
href="mainap14.html#sca">SCA</a> Model that are potentially blocking take an
      <span 
class="ectt-1200">org.eclipse.core.runtime.IProgressMonitor </span>parameter. <div class="admonition block caution block-indent"><div class="caution-inner"><p class="para block block-first">  Never call a potentially
      blocking call from the <a 
href="mainap14.html#ui">UI</a> thread. This has the potential to DEAD-LOCK the application.</p></div></div>
      </li>
      <li class="itemize">Stale state: The state of the local model objects is cached. To update this state,
      there are several <span 
class="ectt-1200">refresh</span>, and <span 
class="ectt-1200">fetch* </span>methods. <div class="admonition block caution block-indent"><div class="caution-inner"><p class="para block block-first">  These are also blocking calls.</p></div></div>
      </li>
      <li class="itemize">Lazy instantiation: The <a 
href="mainap14.html#sca">SCA</a> Model is lazy, on purpose. This avoids network traffic and
      unnecessary strain on the back-end processing system. Therefore, do not assume the state of
      an object has ever been fetched.</li></ul>
<!--l. 143--><p class="noindent" ><div class="admonition block tip block-indent"><div class="tip-inner"><p class="para block block-first">  Once the model is aware of an object, it tries to keep the state of that object up to date
automatically.</p></div></div>
<!--l. 145--><p class="noindent" ><div class="admonition block tip block-indent"><div class="tip-inner"><p class="para block block-first">  Use Eclipse Jobs when calling potentially blocking methods.
<a 
href="http://www.eclipse.org/articles/Article-Concurrency/jobs-api.html" class="url" ><span 
class="ectt-1200">http://www.eclipse.org/articles/Article-Concurrency/jobs-api.html</span></a>
</p></div></div>
<h4 class="subsectionHead"><span class="titlemark">24.4.1   </span> <a 
 id="x26-45000024.4.1"></a>Examples</h4>
<!--l. 150--><p class="noindent" >Below is an example of calling a blocking call and refreshing state:
                                                                                         
                                                                                         
<div class="minipage"><script type="syntaxhighlighter" class="brush: java"><![CDATA[
final ScaComponent component = getInput();
Job job = new Job("Update Job") {

     @Override
     protected IStatus run(IProgressMonitor monitor) {
         // Ensures the properties are fetched and up to
         // date upon completion of this method
         EList<ScaAbstractProperty<?&gt;&gt; properties =
              component.fetchProperties(monitor);

         return Status.OK_STATUS;
     }

};
job.schedule();
]]></script></div>
<!--l. 169--><p class="noindent" >Below is an example of using JFace with the <a 
href="mainap14.html#sca">SCA</a> Model objects:
                                                                                         
                                                                                         
<div class="minipage"><script type="syntaxhighlighter" class="brush: java"><![CDATA[
private void createViewer(Composite parent) {
     // Set the viewer to use all available space
     // within the parent, and some margin.
     FillLayout layout = new FillLayout();
     layout.marginHeight = 4;
     layout.marginWidth = 4;
     parent.setLayout(layout);

     final ComposedAdapterFactory factory =
         new ComposedAdapterFactory(
  ComposedAdapterFactory.Descriptor.Registry.INSTANCE);
     factory.addAdapterFactory(
         new ScaItemProviderAdapterFactory());
     factory.addAdapterFactory(
         new ReflectiveItemProviderAdapterFactory());

     // Sample Viewer
     viewer = new TreeViewer(parent);
     viewer.setContentProvider(
         new AdapterFactoryContentProvider(factory));
     viewer.setLabelProvider(
         new AdapterFactoryLabelProvider(factory));
     viewer.setInput(getInput());
}
]]></script></div>
<!--l. 197--><p class="noindent" >Below is an example of using data bindings. Data bindings have the benefit of keeping a field
in-sync with a back-end resource. It handles all the appropriate listeners and actions
automatically.<br 
class="newline" />
<!--l. 200--><p class="noindent" >First add the additional plug-in dependencies:
      <ul class="itemize1">
      <li class="itemize">org.eclipse.core.databinding
      </li>
      <li class="itemize">org.eclipse.core.databinding.property
      </li>
      <li class="itemize">org.eclipse.emf.databinding
      </li>
                                                                                         
                                                                                         
      <li class="itemize">org.eclipse.jface.databinding
      </li>
      <li class="itemize">gov.redhawk.sca.observables</li></ul>
<div class="minipage"><script type="syntaxhighlighter" class="brush: java"><![CDATA[
Text propValue = new Text(main, SWT.BORDER);
EMFDataBindingContext context = new EMFDataBindingContext();

IObservableValue observable =
     SCAObservables.observeSimpleProperty(component,
        "simplePropId");
context.bindValue(
     WidgetProperties.text().observeDelayed(5000, propValue),
     observable);
]]></script></div>
<!--l. 221--><p class="noindent" >Below is an example of how to create a plot. First, add the additional plug-in dependencies:
      <ul class="itemize1">
      <li class="itemize">gov.redhawk.ui.port.nxmplot</li></ul>
                                                                                         
                                                                                         
<div class="minipage"><script type="syntaxhighlighter" class="brush: java"><![CDATA[
final ScaComponent component = getInput();
final AbstractNxmPlotWidget plot =
 PlotActivator.getDefault().getPlotFactory().createPlotWidget(
     main, SWT.None);
plot.addPlotListener(new AbstractPlotWidgetListener(){

     @Override
     public void click(double x, double y, double t) {
         // TODO Handle Click

     }

});

Job job = new Job("Plot setup job") {

     @Override
     protected IStatus run(IProgressMonitor monitor) {
         ScaUsesPort out =
              (ScaUsesPort) component.getScaPort("bulkioOut");
         String sourcePipeId = NxmPlotUtil.addSource(out, plot);
         return Status.OK_STATUS;
     }

};
job.schedule();
]]></script></div>
<!--l. 254--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">24.5   </span> <a 
 id="x26-45100024.5"></a>Testing a Control Panel</h3>
<!--l. 255--><p class="noindent" >At this stage, all the pieces needed to run the new plug-in are now available. Next, the plug-in
needs to be built. If the Eclipse workbench is set up to build automatically, then the
new view class compiles as soon as the new <a 
href="mainli2.html#glo:component">Component</a> is saved. If not, then select
the project and choose <span 
class="ecbx-1200">Project </span><span 
class="cmmi-12">&#x003E; </span><span 
class="ecbx-1200">Build Project</span>. The class should compile without
error.
<!--l. 262--><p class="noindent" >There are two ways to run a plug-in once it has been built.
                                                                                         
                                                                                         
      <ul class="itemize1">
      <li class="itemize">The plug-in&#8217;s <a 
href="mainap14.html#jar">JAR</a> file can be installed in the eclipse/plugins directory. When the
      Workbench is restarted, it finds the new plug-in.
      </li>
      <li class="itemize">The  Plug-in  Development  Environment  (<a 
href="mainap14.html#pde">PDE</a>)  tool  can  be  used  to  run  another
      Workbench from within the current Workbench. This runtime Workbench is handy for
      testing new plug-ins from the Workbench immediately as they are developed. For more
      information about how a runtime workbench works, check the <a 
href="mainap14.html#pde">PDE</a> guide.</li></ul>
<!--l. 272--><p class="noindent" >For simplicity, the plug-in can be run from within the Eclipse Workbench.
<!--l. 274--><p class="noindent" >To launch a runtime Workbench, choose <span 
class="ecbx-1200">Run </span><span 
class="cmmi-12">&#x003E; </span><span 
class="ecbx-1200">Run Configurations</span>. This dialog shows all the
different ways to launch a program. Choose <span 
class="ecbx-1200">Eclipse Application</span>, click <span 
class="ecbx-1200">New </span>and accept all of the
default settings. This causes another instance of the Eclipse Workbench, the runtime Workbench,
to start.
<!--l. 280--><p class="noindent" ><div class="admonition block tip block-indent"><div class="tip-inner"><p class="para block block-first"> An <a 
href="mainli2.html#glo:application">Application</a> may also be launched from the <span 
class="ecbx-1200">Overview </span>page of the plug-in manifest editor.
To do so, click <span 
class="ecbx-1200">Launch an Eclipse Application </span>from within the <span 
class="ecbx-1200">Testing </span>section. </p></div></div>
<!--l. 284--><p class="noindent" >To access the new panel, connect to a <a 
href="mainli2.html#glo:domain">Domain</a> that is running the desired <a 
href="mainli2.html#glo:component">Component</a>. Right-click
the <a 
href="mainli2.html#glo:component">Component</a>, and in the <span 
class="ecbx-1200">Open With</span><span 
class="ecbx-1200">&#x2026; </span>menu, select the control panel. If the control panel is
registered with the highest priority, then double clicking the <a 
href="mainli2.html#glo:component">Component</a> also opens the new control
panel. <div class="admonition block tip block-indent"><div class="tip-inner"><p class="para block block-first">  This <a 
href="mainli2.html#glo:component">Component</a> may be run within the <a 
href="mainli2.html#glo:Sandbox">Sandbox</a> in this <a 
href="mainap14.html#ide">IDE</a> just like any other
<a 
href="mainli2.html#glo:component">Component</a>. </p></div></div>
The control panel may also be debugged by running the Eclipse application within debug mode. To
run in debug mode, select <span 
class="ecbx-1200">Debug </span><span 
class="cmmi-12">&#x003E; </span><span 
class="ecbx-1200">Debug Configurations</span>.
<!--l. 292--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">24.6   </span> <a 
 id="x26-45200024.6"></a>Building and Installing the Control Panel</h3>
<!--l. 294--><p class="noindent" >A control panel project is an Eclipse plug-in. Eclipse plug-ins can either be built into a <a 
href="mainap14.html#jar">JAR</a> that
can be dropped-in to the Eclipse environment or be wrapped into an Eclipse feature. Using the
drop-in approach is simpler to implement, while creating a feature, the preferred method, provides
a more user-friendly product through the use of p2 repositories (Explained in <a 
href="#x26-45400024.6.2">Section
24.6.2</a>).
<!--l. 298--><p class="noindent" >
                                                                                         
                                                                                         
<h4 class="subsectionHead"><span class="titlemark">24.6.1   </span> <a 
 id="x26-45300024.6.1"></a>Drop-Ins</h4>
<!--l. 299--><p class="noindent" >Creating a drop-in module is accomplished through the following steps:
      <ol  class="enumerate1" >
      <li 
  class="enumerate" id="x26-453002x1">Export the plug-in. Go to the plug-in manifest editor. On the <span 
class="ecbx-1200">Overview </span>page, follow
      the instructions in the <span 
class="ecbx-1200">Exporting </span>section. This produces a <a 
href="mainap14.html#jar">JAR</a> file.
      </li>
      <li 
  class="enumerate" id="x26-453004x2">Copy this <a 
href="mainap14.html#jar">JAR</a> file to the drop-in folder of the target Eclipse / REDHAWK Application.
      The Application must be restarted for the control panel to be installed.</li></ol>
<!--l. 306--><p class="noindent" >While by far the easiest approach to implement, creating a drop-in module is not considered the
most correct nor extensible method. Deploying via the drop-in folder can run into problems if all
dependencies are not satisfied. These errors usually occur silently and are difficult to
diagnose.
<!--l. 308--><p class="noindent" >The preferred mechanism for deploying an Eclipse plug-in is via an Eclipse Update site using
p2.
<!--l. 310--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">24.6.2   </span> <a 
 id="x26-45400024.6.2"></a>p2</h4>
<!--l. 312--><p class="noindent" >p2 is a component of the Equinox project; it provides a provisioning platform for Eclipse-based
applications. Eclipse update sites are essentially p2 repositories.
<!--l. 314--><p class="noindent" >To create an Eclipse update site, a feature must first be created. Features are a way to organize a
set of plug-ins as one installable unit.
<!--l. 316--><p class="noindent" >To create a feature:
      <ol  class="enumerate1" >
      <li 
  class="enumerate" id="x26-454002x1">Open the <span 
class="ecbx-1200">New Project Wizard</span>
           <ol  class="enumerate2" >
           <li 
  class="enumerate" id="x26-454004x1">Click <span 
class="ecbx-1200">File </span><span 
class="cmmi-12">&#x003E; </span><span 
class="ecbx-1200">New </span><span 
class="cmmi-12">&#x003E; </span><span 
class="ecbx-1200">Project</span>
           </li>
           <li 
  class="enumerate" id="x26-454006x2">Expand <span 
class="ecbx-1200">Plug-in Development</span>
           </li>
           <li 
  class="enumerate" id="x26-454008x3">Select <span 
class="ecbx-1200">Feature Project</span></li></ol>
      </li>
      <li 
  class="enumerate" id="x26-454010x2">Type a name, Click <span 
class="ecbx-1200">Finish</span>. A new project is created and the feature.xml form editor
      opens.
                                                                                         
                                                                                         
      </li>
      <li 
  class="enumerate" id="x26-454012x3">Click the <span 
class="ecbx-1200">Plug-ins </span>tab
      </li>
      <li 
  class="enumerate" id="x26-454014x4">Click <span 
class="ecbx-1200">Add</span>
      </li>
      <li 
  class="enumerate" id="x26-454016x5">Type the name of the plug-in into the text field, select it, and then click <span 
class="ecbx-1200">OK</span>.
      </li>
      <li 
  class="enumerate" id="x26-454018x6">Save the file</li></ol>
<!--l. 330--><p class="noindent" ><div class="admonition block tip block-indent"><div class="tip-inner"><p class="para block block-first"> The drop-in folder technique may also be used with features. </p></div></div>
<!--l. 334--><p class="noindent" >To create an update site:
      <ol  class="enumerate1" >
      <li 
  class="enumerate" id="x26-454020x1">Go to the <span 
class="ecbx-1200">Overview </span>tab of the feature.xml editor
      </li>
      <li 
  class="enumerate" id="x26-454022x2">Within the <span 
class="ecbx-1200">Publishing </span>section, click <span 
class="ecbx-1200">Update site project</span>
      </li>
      <li 
  class="enumerate" id="x26-454024x3">Follow the directions to create an update site. The update site project is created and
      the <span 
class="ectt-1200">site.xml </span>file is opened.
      </li>
      <li 
  class="enumerate" id="x26-454026x4">Add the feature to the site and click <span 
class="ecbx-1200">Add Feature</span>
      </li>
      <li 
  class="enumerate" id="x26-454028x5">Enter the name of the feature and click <span 
class="ecbx-1200">OK</span>
      </li>
      <li 
  class="enumerate" id="x26-454030x6">Click <span 
class="ecbx-1200">Build</span></li></ol>
<!--l. 343--><p class="noindent" >Clicking <span 
class="ecbx-1200">Build </span>runs the entire build process (compiling the plug-in, packaging the feature,
and finally deploying it within the update site). A set of new items appears in the site
project: a <span 
class="ectt-1200">feature </span>folder, a <span 
class="ectt-1200">plugins </span>folder and two <a 
href="mainap14.html#jar">JAR</a> files (<span 
class="ectt-1200">artifacts.jar </span>and
<span 
class="ectt-1200">content.jar</span>). Copy these to any web-server to make them available as an update site.
Alternatively, these files and directories can be exported as an archive to be distributed
manually.
<!--l. 347--><p class="noindent" >While p2 is much more complicated than the drop-in approach, it provides dependency
resolution while installing the new plug-ins. p2 also allows the user to update plug-ins after
installation.
<!--l. 350--><p class="noindent" >To install a plug-in from a p2 archive:
                                                                                         
                                                                                         
      <ol  class="enumerate1" >
      <li 
  class="enumerate" id="x26-454032x1">Click <span 
class="ecbx-1200">Help </span><span 
class="cmmi-12">&#x003E; </span><span 
class="ecbx-1200">Install new software</span>
      </li>
      <li 
  class="enumerate" id="x26-454034x2">Click <span 
class="ecbx-1200">Add</span>
      </li>
      <li 
  class="enumerate" id="x26-454036x3">Click <span 
class="ecbx-1200">Archive</span>
      </li>
      <li 
  class="enumerate" id="x26-454038x4">Locate the archive on disk and click <span 
class="ecbx-1200">OK</span>
      </li>
      <li 
  class="enumerate" id="x26-454040x5">Select  the  feature  to  install.  If  no  features  show  up,  deselect  <span 
class="ecbx-1200">Group  items  by</span>
      <span 
class="ecbx-1200">category</span>
      </li>
      <li 
  class="enumerate" id="x26-454042x6">Click <span 
class="ecbx-1200">Finish</span></li></ol>
                                                                                         
                                                                                         
<!--l. 92--><div class="crosslinks"><p class="noindent">[<a 
href="mainap1.html" >next</a>] [<a 
href="mainch23.html" >prev</a>] [<a 
href="mainch23.html#tailmainch23.html" >prev-tail</a>] [<a 
href="mainch24.html" >front</a>] [<a 
href="main.html#mainch24.html" >up</a>] </p></div>
<!--l. 92--><p class="noindent" ><a 
 id="tailmainch24.html"></a>   
 
<div class=license>  
<hr> 
<a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-sa/3.0/80x15.png" /></a><br /><span xmlns:dct="http:// purl.org/dc/terms/" property="dct:title">REDHAWK Documentation</span> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_US">Creative Commons Attribution-ShareAlike 3.0 Unported License</a>. 
 
</div></section></div> 
</body></html> 
